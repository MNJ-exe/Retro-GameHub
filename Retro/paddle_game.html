<!DOCTYPE html>
<html>
<head>
  <title>Paddle & Ball</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: 'Press Start 2P', cursive;
      background: #111;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
    #restartBtn {
      font-family: 'Press Start 2P', cursive;
      display: none;
      position: absolute;
      top: 63%;
      left: 50%;
      transform: translate(-63%, -50%);
      padding: 15px 30px;
      font-size: 20px;
      z-index: 10;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <button id="restartBtn">Restart</button>

  <script>
    const canvas = document.getElementById("gameCanvas")
    const ctx = canvas.getContext("2d")
    const restartBtn = document.getElementById("restartBtn")

    let ballX, ballY, ballDX, ballDY
    const ballRadius = 15

    const paddleW = 130
    const paddleH = 15
    let paddleX, paddleY
    const paddleSpeed = 5
    let rightPressed = false
    let leftPressed = false

    let animationId
    let score = 0

    function initGame() {
      paddleX = (canvas.width - paddleW) / 2
      paddleY = canvas.height - paddleH - 25
      ballX = canvas.width / 2
      ballY = paddleY - ballRadius
      ballDX = 2
      ballDY = -2
      score = 0
      restartBtn.style.display = "none"
      if (animationId) cancelAnimationFrame(animationId)
      update()
    }

    function drawBall() {
      ctx.beginPath()
      ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2)
      ctx.fillStyle = "lime"
      ctx.fill()
      ctx.closePath()
    }

    function drawPaddle() {
      ctx.fillStyle = "cyan"
      ctx.fillRect(paddleX, paddleY, paddleW, paddleH)
    }

    function drawScore() {
      ctx.font = "20px 'Press Start 2P'"
      ctx.fillStyle = "yellow"
      ctx.textAlign = "right"
      ctx.fillText("Score: " + score, canvas.width-20, 40)
    }

    function drawInstructions() {
      ctx.font = "14px 'Press Start 2P'"
      ctx.fillStyle = "red"
      ctx.textAlign = "right"
      ctx.fillText("Press A for left", canvas.width - 20, 65)
      ctx.fillText("Press D for right", canvas.width - 20, 85)
    }

    document.addEventListener("keydown", e => {
      if (e.key === "d" || e.key === "D") rightPressed = true
      if (e.key === "a" || e.key === "A") leftPressed = true
    })
    document.addEventListener("keyup", e => {
      if (e.key === "d" || e.key === "D") rightPressed = false
      if (e.key === "a" || e.key === "A") leftPressed = false
    })

    function resizeCanvas() {
      canvas.width = window.innerWidth
      canvas.height = window.innerHeight
      initGame()
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height)

      drawBall()
      drawPaddle()
      drawScore()
      drawInstructions()

      ballX += ballDX
      ballY += ballDY

      if (ballX + ballRadius > canvas.width || ballX - ballRadius < 0) ballDX = -ballDX
      if (ballY - ballRadius < 0) ballDY = -ballDY

      if (
        ballY + ballRadius > paddleY &&
        ballX > paddleX &&
        ballX < paddleX + paddleW
      ) {
        ballDY = -ballDY
        ballY = paddleY - ballRadius
        score += 10
      }

      if (ballY + ballRadius > canvas.height) {
        cancelAnimationFrame(animationId)
        restartBtn.style.display = "block"
        document.fonts.ready.then(() => {
          ctx.font = "30px 'Press Start 2P'"
          ctx.fillStyle = "white"
          ctx.textAlign = "center"
          ctx.fillText("Game Over!", canvas.width / 2, canvas.height / 2)
          ctx.fillText("Final Score: " + score, canvas.width / 2, canvas.height / 2 + 55)
        })
        return
      }

      if (rightPressed && paddleX < canvas.width - paddleW) paddleX += paddleSpeed
      else if (leftPressed && paddleX > 0) paddleX -= paddleSpeed

      animationId = requestAnimationFrame(update)
    }

    restartBtn.addEventListener("click", () => {
      initGame()
    })

    window.addEventListener("resize", resizeCanvas)
    resizeCanvas()
  </script>
</body>
</html>
